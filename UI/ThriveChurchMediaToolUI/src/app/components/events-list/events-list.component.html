<div class="events-container">
  <!-- Header -->
  <div class="events-header">
    <div class="header-content">
      <div class="header-icon">
        <i class="fas fa-calendar-alt"></i>
      </div>
      <div class="header-text">
        <h1>Events Management</h1>
        <p>Create, edit, and manage church events</p>
      </div>
    </div>
    <button class="btn btn-primary create-btn" (click)="createEvent()">
      <i class="fas fa-plus me-2"></i>Create Event
    </button>
  </div>

  <!-- Filters Card -->
  <div class="events-card filter-card">
    <div class="form-check">
      <input
        class="form-check-input"
        type="checkbox"
        id="includeInactive"
        [(ngModel)]="includeInactive"
        (change)="loadEvents()">
      <label class="form-check-label" for="includeInactive">
        Show inactive events
      </label>
    </div>
  </div>

  <!-- Loading State -->
  @if (loading) {
    <div class="events-card">
      <ngx-skeleton-loader
        count="5"
        [theme]="{
          'height': '60px',
          'margin-bottom': '12px',
          'border-radius': '8px'
        }">
      </ngx-skeleton-loader>
    </div>
  } @else if (events.length === 0) {
    <!-- Empty State -->
    <div class="events-card empty-state">
      <div class="empty-icon">
        <i class="fas fa-calendar-times"></i>
      </div>
      <h3>No Events Found</h3>
      <p>Create your first event to get started!</p>
      <button class="btn btn-primary" (click)="createEvent()">
        <i class="fas fa-plus me-2"></i>Create Event
      </button>
    </div>
  } @else {
    <!-- Events Table -->
    <div class="events-card table-card">
      <div class="table-responsive">
        <table class="events-table">
          <thead>
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Date</th>
              <th scope="col">Type</th>
              <th scope="col">Status</th>
              <th scope="col" class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (event of events; track event.id) {
              <tr [class.inactive-row]="!event.isActive">
                <td>
                  <div class="event-title-cell">
                    <strong>{{ event.title }}</strong>
                    @if (event.isFeatured) {
                      <span class="event-badge featured">
                        <i class="fas fa-star"></i> Featured
                      </span>
                    }
                  </div>
                  <span class="event-summary">{{ event.summary }}</span>
                </td>
                <td>
                  <div class="event-date">{{ formatDate(event.startTime) }}</div>
                  @if (event.isRecurring) {
                    <span class="event-badge recurring">
                      <i class="fas fa-redo me-1"></i>{{ getRecurrenceLabel(event.recurrencePattern) }}
                    </span>
                  }
                </td>
                <td>
                  @if (event.isOnline) {
                    <span class="event-badge online">
                      <i class="fas fa-video me-1"></i>Online
                    </span>
                  } @else if (event.locationName) {
                    <span class="event-badge location">
                      <i class="fas fa-map-marker-alt me-1"></i>{{ event.locationName }}
                    </span>
                  } @else {
                    <span class="event-badge in-person">
                      <i class="fas fa-map-marker-alt me-1"></i>In-Person
                    </span>
                  }
                </td>
                <td>
                  @if (event.isActive) {
                    <span class="event-badge active">Active</span>
                  } @else {
                    <span class="event-badge inactive">Inactive</span>
                  }
                </td>
                <td class="text-center">
                  <div class="action-buttons">
                    <button
                      type="button"
                      class="action-btn view"
                      (click)="viewEvent(event.id)"
                      title="View">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button
                      type="button"
                      class="action-btn edit"
                      (click)="editEvent(event.id)"
                      title="Edit">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button
                      type="button"
                      class="action-btn"
                      [class.deactivate]="event.isActive"
                      [class.activate]="!event.isActive"
                      (click)="toggleEventStatus(event)"
                      [title]="event.isActive ? 'Deactivate' : 'Activate'">
                      <i [class.fa-eye-slash]="event.isActive" [class.fa-eye]="!event.isActive" class="fas"></i>
                    </button>
                    <button
                      type="button"
                      class="action-btn delete"
                      (click)="deleteEvent(event)"
                      title="Delete">
                      <i class="fas fa-trash-alt"></i>
                    </button>
                  </div>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  }
</div>

