<div class="events-container">
  <!-- Header -->
  <div class="events-header">
    <div class="header-content">
      <div class="header-icon">
        <i class="fas fa-calendar-alt"></i>
      </div>
      <div class="header-text">
        <h1>Events Management</h1>
        <p>Create, edit, and manage church events</p>
      </div>
    </div>
    <button class="btn btn-primary create-btn" (click)="createEvent()">
      <i class="fas fa-plus me-2"></i>Create Event
    </button>
  </div>

  <!-- Filters Card -->
  <div class="events-card filter-card">
    <div class="form-check">
      <input
        class="form-check-input"
        type="checkbox"
        id="includeInactive"
        [(ngModel)]="includeInactive"
        (change)="loadEvents()">
      <label class="form-check-label" for="includeInactive">
        Show inactive events
      </label>
    </div>
  </div>

  <!-- Loading State -->
  @if (loading) {
    <div class="events-card">
      <ngx-skeleton-loader
        count="5"
        [theme]="{
          'height': '60px',
          'margin-bottom': '12px',
          'border-radius': '8px'
        }">
      </ngx-skeleton-loader>
    </div>
  } @else if (events.length === 0) {
    <!-- Empty State -->
    <div class="events-card empty-state">
      <div class="empty-icon">
        <i class="fas fa-calendar-times"></i>
      </div>
      <h3>No Events Found</h3>
      <p>Create your first event to get started!</p>
      <button class="btn btn-primary" (click)="createEvent()">
        <i class="fas fa-plus me-2"></i>Create Event
      </button>
    </div>
  } @else {
    <!-- Events Table -->
    <div class="events-card table-card">
      <div class="table-responsive">
        <table class="events-table">
          <thead>
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Date</th>
              <th scope="col">Type</th>
              <th scope="col">Status</th>
              <th scope="col" class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (event of events; track event.Id) {
              <tr [class.inactive-row]="!event.IsActive">
                <td class="title-cell">
                  <div class="event-info">
                    <div class="event-title">
                      <strong>{{ event.Title }}</strong>
                      @if (event.IsFeatured) {
                        <span class="event-badge featured">
                          <i class="fas fa-star"></i>
                        </span>
                      }
                    </div>
                    <span class="event-summary">{{ event.Summary }}</span>
                  </div>
                </td>
                <td class="date-cell">
                  @if (event.IsRecurring) {
                    <div class="event-schedule">
                      <i class="fas fa-sync-alt text-muted me-1"></i>
                      <span class="event-recurrence">{{ getRecurrenceDescription(event) }}</span>
                    </div>
                  } @else {
                    <div class="event-date">{{ formatDate(event.StartTime) }}</div>
                  }
                </td>
                <td class="type-cell">
                  @if (event.IsOnline) {
                    <span class="event-badge online">
                      <i class="fas fa-video"></i> Online
                    </span>
                  } @else if (event.LocationName) {
                    <span class="event-badge location">
                      <i class="fas fa-map-marker-alt"></i> {{ event.LocationName }}
                    </span>
                  } @else {
                    <span class="event-badge in-person">
                      <i class="fas fa-map-marker-alt"></i> In-Person
                    </span>
                  }
                </td>
                <td class="status-cell">
                  @if (event.IsActive) {
                    <span class="status-badge active">Active</span>
                  } @else {
                    <span class="status-badge inactive">Cancelled</span>
                  }
                </td>
                <td class="actions-cell">
                  <div class="action-buttons">
                    <button type="button" class="action-btn edit" (click)="editEvent(event.Id)" title="Edit">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button
                      type="button"
                      class="action-btn"
                      [class.deactivate]="event.IsActive"
                      [class.activate]="!event.IsActive"
                      (click)="toggleEventStatus(event)"
                      [title]="event.IsActive ? 'Cancel event' : 'Reactivate event'">
                      <i [class.fa-ban]="event.IsActive" [class.fa-check]="!event.IsActive" class="fas"></i>
                    </button>
                    <button type="button" class="action-btn delete" (click)="deleteEvent(event)" title="Delete">
                      <i class="fas fa-trash-alt"></i>
                    </button>
                  </div>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  }
</div>

